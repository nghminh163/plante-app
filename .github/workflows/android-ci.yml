name: iOS Build
on:
  push:
    branches: [develop, main, android*]
    commit-ignore:
      - [skip ci]
      - [ci skip]
  pull_request:
    branches: [develop, main, android*]
    commit-ignore:
      - [skip ci]
      - [ci skip]

jobs:
  deploy_android:
    name: Deploy beta build to TestFlight
    runs-on: ubuntu-latest
    steps:
      - name: Set selected color
        run: echo '::set-output name=SELECTED_COLOR::green'
        id: random-color-generator
      - name: Get color
        run: echo "The selected color is ${{ steps.random-color-generator.outputs.SELECTED_COLOR }}"
      - name: Checkout code from ref
        uses: actions/checkout@v2
        with:
          ref: ${{ github.ref }}

      - name: Notify by Telegram
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          document: ./README.md
          message: The new version for android released on Testflight 🙆‍♂️🙆‍♀️
